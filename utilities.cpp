#include "utilities.hpp"
#include <time.h>
#include <unistd.h>
#include <iostream>

using namespace std;

int input_int(string prompt, int min, int max) {
    int res;
    do {
        string tmp;
        cout << prompt << " (from " << min << " to " << max << "): ";
        getline(cin, tmp);
        try {
            res = stoi(tmp);
        } catch(const std::exception& e) {
            cout << "Invalid input\n";
            continue;
        }
        if (res >= min && res <= max) {
            return res;
        }
        cout << "Invalid input\n";
    } while (1);
}

void clear_enter() {
    string tmp;
    cout << "\nPress ENTER to continue...";
    getline(cin, tmp);
    //system("clear");
    cout << "\033[2J\033[1;1H";
}

void clear_time(int seconds) {
    sleep(seconds);
    //system("clear");
    cout << "\033[2J\033[1;1H";
}

int rand_from_to(int min, int max) {
    return rand()%(max - min + 1) + min;
}

void print_title() {
    string s = R"(
 @@@@@@@   @@@@@@    @@@@@@@  @@@  @@@  @@@@@@@    @@@@@@    @@@@@@    @@@@@@@  @@@  @@@  
@@@@@@@@  @@@@@@@@  @@@@@@@@  @@@  @@@  @@@@@@@@  @@@@@@@@  @@@@@@@@  @@@@@@@@  @@@  @@@  
!@@       @@!  @@@  !@@       @@!  !@@  @@!  @@@  @@!  @@@  @@!  @@@  !@@       @@!  @@@  
!@!       !@!  @!@  !@!       !@!  @!!  !@!  @!@  !@!  @!@  !@!  @!@  !@!       !@!  @!@  
!@!       @!@  !@!  !@!       @!@@!@!   @!@!!@!   @!@  !@!  @!@!@!@!  !@!       @!@!@!@!  
!!!       !@!  !!!  !!!       !!@!!!    !!@!@!    !@!  !!!  !!!@!!!!  !!!       !!!@!!!!  
:!!       !!:  !!!  :!!       !!: :!!   !!: :!!   !!:  !!!  !!:  !!!  :!!       !!:  !!!  
:!:       :!:  !:!  :!:       :!:  !:!  :!:  !:!  :!:  !:!  :!:  !:!  :!:       :!:  !:!  
 ::: :::  ::::: ::   ::: :::   ::  :::  ::   :::  ::::: ::  ::   :::   ::: :::  ::   :::  
 :: :: :   : :  :    :: :: :   :   :::   :   : :   : :  :    :   : :   :: :: :   :   : :  
               @@@@@@@    @@@@@@    @@@@@@@  @@@  @@@  @@@   @@@@@@@@                     
               @@@@@@@@  @@@@@@@@  @@@@@@@@  @@@  @@@@ @@@  @@@@@@@@@                     
               @@!  @@@  @@!  @@@  !@@       @@!  @@!@!@@@  !@@                           
               !@!  @!@  !@!  @!@  !@!       !@!  !@!!@!@!  !@!                           
               @!@!!@!   @!@!@!@!  !@!       !!@  @!@ !!@!  !@! @!@!@                     
               !!@!@!    !!!@!!!!  !!!       !!!  !@!  !!!  !!! !!@!!                     
               !!: :!!   !!:  !!!  :!!       !!:  !!:  !!!  :!!   !!:                     
               :!:  !:!  :!:  !:!  :!:       :!:  :!:  !:!  :!:   !::                     
               ::   :::  ::   :::   ::: :::   ::   ::   ::   ::: ::::                     
                :   : :   :   : :   :: :: :  :    ::    :    :: :: :                     
    )";
    cout << s << "\n";
}

void print_start() {
    string s1 = R"(
@@@@@@@   @@@@@@@@   @@@@@@   @@@@@@@   @@@ @@@  
@@@@@@@@  @@@@@@@@  @@@@@@@@  @@@@@@@@  @@@ @@@  
@@!  @@@  @@!       @@!  @@@  @@!  @@@  @@! !@@  
!@!  @!@  !@!       !@!  @!@  !@!  @!@  !@! @!!  
@!@!!@!   @!!!:!    @!@!@!@!  @!@  !@!   !@!@!   
!!@!@!    !!!!!:    !!!@!!!!  !@!  !!!    @!!!   
!!: :!!   !!:       !!:  !!!  !!:  !!!    !!:    
:!:  !:!  :!:       :!:  !:!  :!:  !:!    :!:    
::   :::   :: ::::  ::   :::   :::: ::     ::    
 :   : :  : :: ::    :   : :  :: :  :      :     
                                                
    )";
    string s2 = R"(
 @@@@@@   @@@@@@@  @@@@@@@@   @@@@@@   @@@@@@@   @@@ @@@  
@@@@@@@   @@@@@@@  @@@@@@@@  @@@@@@@@  @@@@@@@@  @@@ @@@  
!@@         @@!    @@!       @@!  @@@  @@!  @@@  @@! !@@  
!@!         !@!    !@!       !@!  @!@  !@!  @!@  !@! @!!  
!!@@!!      @!!    @!!!:!    @!@!@!@!  @!@  !@!   !@!@!   
 !!@!!!     !!!    !!!!!:    !!!@!!!!  !@!  !!!    @!!!   
     !:!    !!:    !!:       !!:  !!!  !!:  !!!    !!:    
    !:!     :!:    :!:       :!:  !:!  :!:  !:!    :!:    
:::: ::      ::     :: ::::  ::   :::   :::: ::     ::    
:: : :       :     : :: ::    :   : :  :: :  :      :     
                                                          
    )";
    string s3 = R"(
 @@@@@@@@   @@@@@@   
@@@@@@@@@  @@@@@@@@  
!@@        @@!  @@@  
!@!        !@!  @!@  
!@! @!@!@  @!@  !@!  
!!! !!@!!  !@!  !!!  
:!!   !!:  !!:  !!!  
:!:   !::  :!:  !:!  
 ::: ::::  ::::: ::  
 :: :: :    : :  :   
                     
    )";
    cout << s1;
    clear_time(2);
    cout << s2;
    clear_time(2);
    cout << s3;
    clear_time(2);
}

void print_menu(MainPlayer player) {
    string tmp = R"(
  __ _  ___ ___  __ __
 /  ' \/ -_) _ \/ // /
/_/_/_/\__/_//_/\_,_/ 

    )";
    cout << tmp;
    cout << "\nmoney: " << player.money << "     wins: " << player.wins << "\n";
    cout << "\n1: RACE\n\n2: MAZE\n\n0: QUIT\n\n";
}